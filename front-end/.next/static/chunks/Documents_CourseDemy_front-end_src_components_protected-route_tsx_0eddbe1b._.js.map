{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/hoangvietanh/Documents/CourseDemy/front-end/src/components/protected-route.tsx"],"sourcesContent":["\"use client\";\n\n// Phân quyền FE\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAppDispatch, useAppSelector } from \"@/redux/hooks\";\n\ninterface ProtectedRouteProps {\n  allowedRoles: string[];\n  children: React.ReactNode;\n}\n\nexport default function ProtectedRoute({\n  allowedRoles,\n  children,\n}: ProtectedRouteProps) {\n  const router = useRouter();\n  const [role, setRole] = useState<string | null>(null);\n  const { user } = useAppSelector((state) => state.auth);\n\n  useEffect(() => {\n    const storedRole = user?.role;\n\n    if (!storedRole || !allowedRoles.includes(storedRole)) {\n      router.push(\"/login\"); // không có quyền thì về login\n    } else {\n      setRole(storedRole);\n    }\n  }, [allowedRoles, router]);\n\n  if (!role) return <p>Đang kiểm tra quyền...</p>;\n\n  return <>{children}</>;\n}\n"],"names":[],"mappings":";;;;;AAEA,gBAAgB;AAChB;AACA;AACA;;;AALA;;;;AAYe,SAAS,eAAe,KAGjB;QAHiB,EACrC,YAAY,EACZ,QAAQ,EACY,GAHiB;;IAIrC,MAAM,SAAS,IAAA,6LAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,oNAAQ,EAAgB;IAChD,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,qLAAc;yCAAC,CAAC,QAAU,MAAM,IAAI;;IAErD,IAAA,qNAAS;oCAAC;YACR,MAAM,aAAa,iBAAA,2BAAA,KAAM,IAAI;YAE7B,IAAI,CAAC,cAAc,CAAC,aAAa,QAAQ,CAAC,aAAa;gBACrD,OAAO,IAAI,CAAC,WAAW,8BAA8B;YACvD,OAAO;gBACL,QAAQ;YACV;QACF;mCAAG;QAAC;QAAc;KAAO;IAEzB,IAAI,CAAC,MAAM,qBAAO,wOAAC;kBAAE;;;;;;IAErB,qBAAO;kBAAG;;AACZ;GArBwB;;QAIP,6LAAS;QAEP,qLAAc;;;KANT","debugId":null}}]
}