{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///Users/hoangvietanh/Documents/CourseDemy/front-end/src/api/axiosClient.ts"],"sourcesContent":["// src/api/axiosClient.ts\nimport axios from \"axios\";\n\nconst axiosClient = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\n  withCredentials: true,\n});\n\n// Interceptor request\naxiosClient.interceptors.request.use(\n  (config) => {\n    // Gắn token nếu có\n    const token =\n      typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n\n    // Nếu body là FormData => để axios tự set multipart/form-data\n    if (config.data instanceof FormData) {\n      // KHÔNG set Content-Type ở đây,\n      // để axios tự thêm boundary phù hợp\n    } else {\n      // Nếu không phải FormData => gửi JSON\n      config.headers[\"Content-Type\"] = \"application/json\";\n    }\n\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Interceptor response\naxiosClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    const status = error.response?.status;\n    if (status === 401) {\n      console.warn(\"Unauthorized - Có thể token hết hạn\");\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default axiosClient;\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;AACzB;;AAEA,MAAM,cAAc,2LAAK,CAAC,MAAM,CAAC;IAC/B,OAAO;IACP,iBAAiB;AACnB;AAEA,sBAAsB;AACtB,YAAY,YAAY,CAAC,OAAO,CAAC,GAAG,CAClC,CAAC;IACC,mBAAmB;IACnB,MAAM,QACJ,sCAAgC,0BAAgC;IAClE;;IAIA,8DAA8D;IAC9D,IAAI,OAAO,IAAI,YAAY,UAAU;IACnC,gCAAgC;IAChC,oCAAoC;IACtC,OAAO;QACL,sCAAsC;QACtC,OAAO,OAAO,CAAC,eAAe,GAAG;IACnC;IAEA,OAAO;AACT,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG5B,uBAAuB;AACvB,YAAY,YAAY,CAAC,QAAQ,CAAC,GAAG,CACnC,CAAC,WAAa,UACd,CAAC;IACC,MAAM,SAAS,MAAM,QAAQ,EAAE;IAC/B,IAAI,WAAW,KAAK;QAClB,QAAQ,IAAI,CAAC;IACf;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///Users/hoangvietanh/Documents/CourseDemy/front-end/src/hooks/useApi.ts"],"sourcesContent":["import axiosClient from \"@/api/axiosClient\";\n\nexport function useApi() {\n  async function get(url: string) {\n    const res = await axiosClient.get(url);\n    return res.data;\n  }\n\n  async function post(url: string, data?: any) {\n    const res = data\n      ? await axiosClient.post(url, data)\n      : await axiosClient.post(url);\n    return res.data;\n  }\n\n  async function put(url: string, data: any) {\n    const res = await axiosClient.put(url, data);\n    return res.data;\n  }\n\n  async function remove(url: string) {\n    const res = await axiosClient.delete(url);\n    return res.data;\n  }\n\n  return { get, post, put, remove };\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,SAAS;IACd,eAAe,IAAI,GAAW;QAC5B,MAAM,MAAM,MAAM,+KAAW,CAAC,GAAG,CAAC;QAClC,OAAO,IAAI,IAAI;IACjB;IAEA,eAAe,KAAK,GAAW,EAAE,IAAU;QACzC,MAAM,MAAM,OACR,MAAM,+KAAW,CAAC,IAAI,CAAC,KAAK,QAC5B,MAAM,+KAAW,CAAC,IAAI,CAAC;QAC3B,OAAO,IAAI,IAAI;IACjB;IAEA,eAAe,IAAI,GAAW,EAAE,IAAS;QACvC,MAAM,MAAM,MAAM,+KAAW,CAAC,GAAG,CAAC,KAAK;QACvC,OAAO,IAAI,IAAI;IACjB;IAEA,eAAe,OAAO,GAAW;QAC/B,MAAM,MAAM,MAAM,+KAAW,CAAC,MAAM,CAAC;QACrC,OAAO,IAAI,IAAI;IACjB;IAEA,OAAO;QAAE;QAAK;QAAM;QAAK;IAAO;AAClC","debugId":null}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///Users/hoangvietanh/Documents/CourseDemy/front-end/src/components/cart/CartItemDisplay.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useApi } from \"@/hooks/useApi\";\nimport { Button } from \"../ui/button\";\nimport { ArrowRight } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { useAppSelector } from \"@/redux/hooks\";\nimport { useRouter } from \"next/navigation\";\nimport { da } from \"zod/v4/locales\";\n\nconst CartItemDisplay = () => {\n  const router = useRouter();\n  const user = useAppSelector((state) => state.auth.user);\n  const { get, remove, post } = useApi();\n\n  const [cartItems, setCartItems] = useState<any[]>([]);\n  const [courseIds, setCourseIds] = useState<any[]>([]);\n  const [total, setTotal] = useState(0);\n\n  // Lấy giỏ hàng\n  const getCoursesInCart = async () => {\n    if (!user?.id) return;\n\n    try {\n      const data = await get(`/cart/user/${user.id}`);\n      const items = Array.isArray(data?.cart_items) ? data.cart_items : [];\n\n      // Gọi API lấy thông tin từng khóa học\n      const detailedItems = await Promise.all(\n        items.map(async (item: any) => {\n          try {\n            const course = await get(`/course/${item.course_id}`);\n\n            return {\n              ...item,\n              title: course.title,\n              level: course.level,\n              teacher_name: course.teacher_name,\n            };\n          } catch {\n            return { ...item, title: `Khóa học #${item.course_id}` };\n          }\n        })\n      );\n\n      setCartItems(detailedItems);\n      setCourseIds(detailedItems.map((i) => i.course_id));\n\n      // Tính tổng\n      const totalAmount = detailedItems.reduce(\n        (sum: number, item: any) =>\n          sum + (item.price || 0) * (item.quantity || 1),\n        0\n      );\n      setTotal(totalAmount);\n    } catch (err) {\n      toast.error(\"Lỗi khi lấy giỏ hàng: \" + err);\n      setCartItems([]);\n      setTotal(0);\n    }\n  };\n\n  // Xoá khóa học khỏi giỏ\n  const handleRemove = async (course_id: number) => {\n    if (!user?.id) {\n      toast.error(\"Bạn chưa đăng nhập!\");\n      return;\n    }\n\n    try {\n      await remove(`/cart/remove?userId=${user.id}&courseId=${course_id}`);\n      getCoursesInCart(); // load lại\n    } catch (error) {\n      toast.error(\"Xoá thất bại!\");\n    }\n  };\n\n  //\n  const handleCreateOrder = async () => {\n    const body = {\n      user_id: user?.id,\n      course_id: courseIds,\n      payment_method: \"momo\",\n    };\n\n    try {\n      const data = await post(\"/checkout/cart\", body);\n      console.log(data);\n      router.push(\"/payment/checkout\");\n    } catch (err) {\n      toast.error(\"Lỗi: \" + err || \"Có lỗi xảy ra\");\n    }\n  };\n\n  useEffect(() => {\n    getCoursesInCart();\n  }, [user?.id]);\n\n  return (\n    <div className=\"flex gap-6 p-4 cursor-pointer\">\n      {/* Bên trái: danh sách khóa học */}\n      <div className=\"flex-1\">\n        <h5 className=\"font-semibold text-lg mb-5 border-b\">\n          Có {cartItems.length} khóa học trong giỏ hàng\n        </h5>\n\n        <div className=\"space-y-3\">\n          {cartItems.map((item, index) => (\n            <div\n              key={index}\n              className=\"border p-3 rounded flex justify-between\"\n            >\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-[100px] h-[60px] bg-gray-200 rounded\"></div>\n                <div>\n                  <h3 className=\"font-semibold\">{item.title}</h3>\n                  <p className=\"text-sm text-gray-600\">\n                    Bởi {item.teacher_name}\n                  </p>\n                  <span className=\"text-xs text-gray-500\">\n                    Cấp độ: {item.level}\n                  </span>\n                </div>\n              </div>\n\n              <div className=\"flex gap-6\">\n                <span\n                  onClick={() => handleRemove(item.course_id)}\n                  className=\"text-sm text-red-500 hover:underline\"\n                >\n                  Xoá\n                </span>\n                <span className=\"font-semibold\">\n                  {item.price?.toLocaleString()} đ\n                </span>\n              </div>\n            </div>\n          ))}\n\n          {cartItems.length === 0 && (\n            <p className=\"text-gray-500 italic text-center mt-6\">\n              Giỏ hàng trống\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* Bên phải: tổng tiền */}\n      <div className=\"min-w-[300px] p-4 h-fit\">\n        <h2 className=\"font-semibold text-lg mb-2\">Tổng tiền</h2>\n        <h1 className=\"text-2xl font-bold text-red-600 mb-[30px]\">\n          {total.toLocaleString()} đ\n        </h1>\n\n        <Button\n          className=\"w-full h-[50px] cursor-pointer\"\n          onClick={handleCreateOrder}\n        >\n          Thanh toán <ArrowRight className=\"ml-2\" />\n        </Button>\n        <p className=\"text-sm text-[#3d2626] my-2\">\n          Bạn sẽ không bị tính phí ngay bây giờ\n        </p>\n        <hr />\n      </div>\n    </div>\n  );\n};\n\nexport default CartItemDisplay;\n"],"names":[],"mappings":"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","debugId":null}}]
}